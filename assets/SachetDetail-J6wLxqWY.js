import{r as o,o as u,c as d,w as t,b as e,l as T,i as V,m as B,j as N,n as j,g as y,_ as R,e as S,p as U,q}from"./index-BZ2zsZ7L.js";import{_ as z}from"./EditableList-mfPlF7aj.js";import{u as F}from"./SachetStore-D-9TX8c6.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={__name:"Dialog",props:{modelValue:Boolean,title:String,message:String,icon:String,color:{type:String,default:"primary"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"}},emits:["update:modelValue","confirm"],setup(r,{emit:b}){const m=r,n=b,i=B({get:()=>m.modelValue,set:s=>n("update:modelValue",s)});return(s,a)=>{const p=o("v-card-text"),x=o("v-spacer"),_=o("v-btn"),c=o("v-card-actions"),l=o("v-card"),f=o("v-dialog");return u(),d(f,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=v=>i.value=v),"max-width":"500",persistent:""},{default:t(()=>[e(l,{"prepend-icon":r.icon,title:r.title,text:r.message},{default:t(()=>[s.$slots.default?(u(),d(p,{key:0},{default:t(()=>[T(s.$slots,"default")]),_:3})):V("",!0),e(c,null,{default:t(()=>[e(x),e(_,{variant:"text",text:r.cancelText,onClick:a[0]||(a[0]=v=>i.value=!1)},null,8,["text"]),e(_,{color:r.color,variant:"tonal",text:r.confirmText,onClick:a[1]||(a[1]=v=>s.$emit("confirm"))},null,8,["color","text"])]),_:1})]),_:3},8,["prepend-icon","title","text"])]),_:3},8,["modelValue"])}}},A={__name:"SachetDetail",setup(r){const m=j().params.id,n=y(null),i=F();N(async()=>{const c=await i.getSachetById(m);c.error===null&&(n.value=c.data)});const s=y(!1),a=y(null),p=c=>{a.value=c,s.value=!0},x=c=>{a.value=c,s.value=!0},_=async()=>{a.value&&(n.value[0].leaf=n.value[0].leaf.filter(c=>c.title!==a.value.title),await i.removeLeafFromSachet(m,a.value.id_leaf),s.value=!1,a.value=null)};return(c,l)=>{const f=o("v-icon"),v=o("v-toolbar-title"),D=o("v-toolbar"),$=o("v-card-text"),w=o("v-card"),C=o("v-card-title"),I=o("v-col"),h=o("v-row"),k=o("v-container");return n.value?(u(),d(k,{key:0},{default:t(()=>[e(R,{backIcon:"",title:n.value[0].date+" ("+n.value[0].teapot.name+")"},{prepend:t(()=>[e(f,{icon:"mdi-tea",end:""})]),_:1},8,["title"]),e(h,{justify:"center"},{default:t(()=>[e(I,{cols:"12",md:"7"},{default:t(()=>[n.value[0].leaf.length?(u(),d(w,{key:0,class:"d-flex flex-column pb-5",style:{"max-height":"400px"}},{default:t(()=>[e(D,{flat:"",color:"surface",class:"border-bottom"},{default:t(()=>[e(f,{icon:"mdi-leaf",class:"ms-4"}),e(v,{class:"font-weight-bold"},{default:t(()=>[...l[2]||(l[2]=[S("Leafs",-1)])]),_:1})]),_:1}),e($,{class:"overflow-y-auto pa-0"},{default:t(()=>[e(z,{items:n.value[0].leaf,deleteIcon:"",onRemove:l[0]||(l[0]=(g,L)=>x(g,L)),onShowDetail:p},null,8,["items"])]),_:1})]),_:1})):V("",!0),n.value[0].leaf.length?V("",!0):(u(),d(w,{key:1},{default:t(()=>[e(C,{class:"pa-10 text-center text-grey"},{default:t(()=>[e(f,{size:"x-small",icon:"mdi-sleep"}),l[3]||(l[3]=S(" No leafs! ",-1))]),_:1})]),_:1}))]),_:1})]),_:1}),e(O,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=g=>s.value=g),title:"Delete "+a.value?.title+"?",icon:"mdi-alert-circle",color:"error","confirm-text":"Delete",onConfirm:_},null,8,["modelValue","title"]),e(U,{addLeaf:"",leaf:"",sachetId:q(m)},null,8,["sachetId"])]),_:1})):(u(),d(k,{key:1},{default:t(()=>[...l[4]||(l[4]=[S("Sachet not found!",-1)])]),_:1}))}}},K=M(A,[["__scopeId","data-v-49054e6d"]]);export{K as default};
