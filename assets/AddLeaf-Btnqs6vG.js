import{u as R}from"./LeafStore-Dtgk4ncH.js";import{u as T}from"./SachetStore-CYVVLu64.js";import{j as q,o as r,c as v,w as t,n as z,g as f,r as e,a as D,b as a,e as i,h as E,F as G,k as M,C as $,t as m,i as H}from"./index-CcSU6pNj.js";import{_ as J}from"./vue-helpers-DlAUqK2U.js";const K={__name:"AddLeaf",setup(O){const c=R(),_=f([]),s=f([]),b=T(),h=z(),x=D(),p=f(null);q(async()=>{p.value=h.query.sachetId,c.leafs.length===0?(await c.loadLeafs()).error===null&&(_.value=c.leafs):_.value=c.leafs});const d=o=>s.value.some(n=>n.id_leaf===o.id_leaf),k=o=>{const n=s.value.findIndex(u=>u.id_leaf===o.id_leaf);n===-1?s.value.push(o):s.value.splice(n,1)},g=async()=>{(await b.addLeafsToSachet(p.value,s.value)).error===null&&x.back()};return(o,n)=>{const u=e("AppBar"),y=e("v-card-title"),w=e("v-checkbox-btn"),L=e("v-list-item-title"),C=e("v-list-item-subtitle"),A=e("v-list-item"),S=e("v-list"),B=e("v-card-text"),I=e("v-btn"),N=e("v-card-actions"),V=e("v-card"),j=e("v-container");return r(),v(j,{fluid:"",class:"fill-height d-flex justify-center align-center"},{default:t(()=>[a(u,{backIcon:"",title:"Go back"}),a(V,{class:"d-flex flex-column align-center w-100","max-width":"450"},{default:t(()=>[a(y,null,{default:t(()=>[...n[0]||(n[0]=[i("Leafs",-1)])]),_:1}),a(B,{class:"w-100"},{default:t(()=>[a(S,{class:"pa-0 bg-transparent",lines:"two"},{default:t(()=>[(r(!0),E(G,null,M(_.value,(l,F)=>(r(),v(A,{key:F,class:$(["mb-2 rounded-lg border",{"border-secondary":d(l)}]),elevation:"0",ripple:!0,onClick:P=>k(l),active:d(l)},{prepend:t(()=>[a(w,{"model-value":d(l),color:"secondary"},null,8,["model-value"])]),default:t(()=>[a(L,{class:"font-weight-medium text-body-1"},{default:t(()=>[i(m(l.title),1)]),_:2},1024),a(C,{class:"text-caption"},{default:t(()=>[i(m(l.description),1)]),_:2},1024)]),_:2},1032,["class","onClick","active"]))),128))]),_:1})]),_:1}),s.value.length>0?(r(),v(N,{key:0,class:"w-100 pa-4"},{default:t(()=>[a(I,{onClick:g,block:"",color:"secondary",variant:"elevated"},{default:t(()=>[i(" Add "+m(s.value.length)+" leafs ",1)]),_:1})]),_:1})):H("",!0)]),_:1})]),_:1})}}},Y=J(K,[["__scopeId","data-v-b9a735e7"]]);export{Y as default};
