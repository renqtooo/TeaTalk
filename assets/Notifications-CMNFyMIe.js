import{x as y,y as c,j as w,o as u,c as i,w as l,g as x,r as o,b as _,_ as g,i as d,e as N}from"./index-pWTT1mN7.js";import{_ as k}from"./EditableList-CL56Kv32.js";const C=y("requestStore",{state:()=>({requests:[]}),actions:{async getRequests(){const s=await c.from("request").select(`
    *,
    teapot ( name ),
    sender:id_sender ( username ),
    receiver:id_receiver ( username )
  `);return this.requests=s.data,s},async acceptRequest(s){return await c.from("request").update({status:"accepted"}).eq("id_request",s).select()},async declineRequest(s){return await c.from("request").update({status:"declined"}).eq("id_request",s).select()},async cancelRequest(s){return await c.from("request").delete().eq("id_request",s)}}}),j={__name:"Notifications",setup(s){const r=C(),e=x([]);w(async()=>{await r.getRequests()&&(e.value=r.requests)});const q=async t=>{(await r.acceptRequest(t.id_request)).error||(e.value=e.value.filter(a=>a.id_request!==t.id_request))},p=async t=>{(await r.declineRequest(t.id_request)).error||(e.value=e.value.filter(a=>a.id_request!==t.id_request))},f=async t=>{(await r.cancelRequest(t.id_request)).error||(e.value=e.value.filter(a=>a.id_request!==t.id_request))};return(t,n)=>{const a=o("v-icon"),v=o("v-card-title"),m=o("v-card"),R=o("v-container");return u(),i(R,null,{default:l(()=>[_(g,{title:"Notifications"}),_(m,null,{default:l(()=>[e.value.length?(u(),i(k,{key:0,subtitle:"",onApprove:q,onReject:p,onCancel:f,approveIcon:"",rejectIcon:"",items:e.value},null,8,["items"])):d("",!0),e.value.length?d("",!0):(u(),i(v,{key:1,class:"pa-10 text-center text-grey"},{default:l(()=>[_(a,{size:"x-small",icon:"mdi-sleep"}),n[0]||(n[0]=N(" No notifications! ",-1))]),_:1}))]),_:1})]),_:1})}}};export{j as default};
